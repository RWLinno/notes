### 数据传送指令

##### 通用传送：mov DST,SRC

将源操作数SRC的内容传送到目标操作数

##### 交换：xchg OPR1,OPR2

完成OPR1操作数与OPR2操作数内容的交换

##### 地址传送:lea REG,SRC

源操作数的有效地址（偏移地址）送到指定**寄存器**

功能类似的还有LDS指令和LES指令。

##### 标志位传送： 

格式：LAHF

功能：将标志寄存器的最右8位送AH寄存器。

格式：SAHF

功能：将AH内容送到标志寄存器的最右八位。

##### 换码指令：XLAT /OPR

功能：将AL与BX**内容之和**为偏移地址的存储单元内容送到AL。

```cpp
mov bx,100h
mov al,03h
xlat ;al<-ds:[bx+al]
```



### 堆栈操作

##### 进栈:push SRC/PUSHF

将源操作数内容压栈，同时自动修改栈顶指针。

##### 出栈:pop DST/POPF/

从堆栈弹出数据



### 算术运算指令

#### 常用标志位：

进位标志CF：最高位有进位或借位，则置1。

辅助进位标志AF：低半字节有进位或借位，则置1。

符号标志SF：算术或逻辑运算结果为正，则置0。

零标志ZF：算术或逻辑运算结果为0，则置1。

奇偶标志PF：算术或逻辑操作结果为**低8位含有偶数个1**，则PF置1。

溢出标志OF：若两操作数的符号相同而与结果的符号相反，则置1。



#### 加法指令

**add DST,SRC**

功能：将源操作数和目标操作数相加，结果送到目标操作数。

**adc DST,SRC**

功能：将源操作数、目标操作数和**CF的值**相加送到目标操作数。

**inc**

功能：将除段寄存器以外任何存储器或存储单元内容加1。



#### 减法指令

**sub DST,SRC**

功能：从目标操作数中减去源操作数，结果存在目标操作数。

**sbb DST,SRC**

功能：从目标操作数中减去源操作数**和CF**，结果存在目标操作数。

**dec OPR**

功能：将目标操作数减1

**neg OPR**

功能：使操作数按位求反再加1，结果送入目标操作数。

##### cmp OPR1,OPR2

功能：用目标操作数减去源操作数，根据结果设置标志位。



#### 乘法指令

##### mul SRC

功能：将累加器(AX或AL)与源操作数作为**无符号数**相乘。

##### imul

功能：将累加器（AX或AL）与源操作数作为**有符号数**相乘。



#### 除法指令

##### div SRC

功能：将两个无符号数相除

若SRC为8位，目标操作数->AX,商->AL中，余数->AH；

若SRC为16位，目标操作数高位字->DX，低位字->AX，商->AX，余数->DX。

idiv ;ax<-商,余数<-dx

##### cbw

功能：将al符号扩展到ax

##### cwd

功能：将ax符号扩展到dx和ax寄存器对



#### 十进制算术运算指令

压缩BCD码：四位二进制数表示一位10进制数。

非压缩BCD码：八位二进制数表示一位十进制数。

十进制数的运算步骤：①对BCD码进行二进制运算；②用十进制调整指令进行调整。



##### 压缩BCD码调整

加法daa

减法das

非压缩BCD码调整：

加法aaa

减法aas

乘法aam

除法

aad

###  *以上补充一下*



### 逻辑运算指令

##### not OPR

功能：将给定操作数取反，且不影响标志位。

##### or DST,SRC

功能：将源与目标操作数按位**或**运算，结果送到目标操作数。

##### and DST,SRC

功能：将源与目标操作数按位**与**运算，结果送到目标操作数。

##### xor DST,SRC

功能：将源与目标操作数按位**异或**运算，结果送到目标操作数。





### 移位指令

##### shl OPR,CNT

功能：将操作数逻辑左移。

##### shr OPR,CNT

功能：将操作数逻辑右移。

##### SAL OPR,CNT

功能：将操作数算术左移。

##### SAR OPR,CNT

功能：将操作数算术右移。（需要考虑符号位）

##### rol/ror

功能：不带进位循环左/右移

##### rcl/rcr

功能：带进位循环左/右移



## 控制转移类

jmp next ;无条件转移到next

jz/jnz next  ;等于0(zf=1)，转移到next

js/jns next ;符号为负(sf=1)，转移到next

jp/jnp next ;“1”的个数为偶(pf=1)，转移到next

jo/jno next: 溢出(of=1),转移到next

jc/jb/jnae next:进位/低于/不高于等于(cf=1)，转移到next

jnc/jnb/jae next:无进位/不低于/高于等于(cf=0)，转移到next

jbe/jna next ;低于等于/不高于（cf=1或zf=1），转移到next

jnbe/ja next ;不低于等于/高于（cf=0且zf=0），转移到next

jcxz label ;cx=0时，转移到label

剩下一些没见过的不记了。



## 其他常用指令

##### nop 空操作

##### hlt 停机

##### wait 等待

##### esc 换码

##### lock 封锁



loop ;首先将cx--，然后判断cx是否为0，cx为0时跳出循环

cmp A,B;返回是否A>=B，通常跟跳转指令

```cpp
cmp ax,0
jge nonneg ;分支条件:ax>=0
neg ax ;条件不满足，求补
nonneg : mov res,ax
```







## 子程序指令

call label;调用子程序label

ret ;子出现返回



## 其他指令



### 信息显示

```cpp
string db 'HelloWorld',0dh,0ah,'$'
```

其中0dh和0ah表达回车换行（相当于'\n'）,字符串最后的一个'$'是9号DOS调用要求的字符串结尾字符。

变量名string包含段基地址和偏移地址，可以用offset获得其偏移地址并保存到dx寄存器中。

```cpp
mov dx,offset string ;定义字符串在数据段的偏移地址
mov ah,9 
int 21h ;利用DOS功能调用显示信息
```





### 简化段定义的源程序框架

```cpp
.model small
.stack
.data
...
.code
.startup
...
.exit 0
...
end
```



### 常用INT 21H系统功能调用

4ch : 返回DOS

1 ：键盘输入一个字符到al中

2 : 输出dl寄存器的字符到显示器

9 ：输出一个以’$'结尾的字符串到显示器

0ah ： 从键盘输入一个字符串到指定缓冲区



### 多分支结构

```cpp
or ah,ah ;等效于cmp ah,0
jz fc0 ;ah=0，转向fc0
dec ah
jz fc1 ;ah=1，转向fc1
dec ah
jz fc2
...
```



### 串操作类指令

##### 串传送指令

movsb

movsw





### 过程定义伪指令

```cpp
过程名 proc[near/far]
    过程体
过程名 endp
```



### 题集

SAR DX,1：完成对DX的有符号数除以2。

STC 指令：使进位标志置1。

LDS SI,ES:[2000H]的全部功能：把地址2000H字单元内容送SI，把2002H字单元内容送DS（SI会自加）。

ADD WORD PTR[0524H],2A59H：用位移量位0524H的直接寻址方式把存储器中的一个字与数2A59H相加，并把结果送回存储单元中。

汇编指令中不可省略的项是**操作项**。



##### 编写指令序列使类型1CH的中断向量指向中断处理程序SHOW_CLOCK

```cpp
MOV AL,1CH
MOV AH,35H
INT 21H
PUSH ES
PUSH BX
PUSH DS
MOV AX,SEG SHOW_CLOCK
MOV DS,AX
MOV DX,OFFSET SHOW_CLOCK
MOV AL,1CH
MOV AH,25H
INT 21H
POP DS

POP DX
POP DS  
MOV AL,1CH
MOV AH,25H
INT 21H
```



循环指令LOOPNZ终止循环的条件是**CX=0，或Z=1**。



端口寻址的输入/输出方式 **不占用内存单元**。

NEG指令是**用0减操作数**。

