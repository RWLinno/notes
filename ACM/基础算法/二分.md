# 二分



#### 一些常见问题

Q:为什么要使用二分？

A：效率很高，在查找某个可行解的时候，测试数据会把遍历时间卡到O(n)，而二分的话只需要O(logn)就能完成。

Q：什么时候使用二分？

A：数据是有序的，答案要求寻找某一个满足条件的边界数值。

Q：二分好学吗？

A：特别好学，超容易入门，也容易用上，学二分很划算！



#### 二分基本写法

①找到答案的范围，用l和r表示，用mid来表示中间值；

②以寻找最小答案为例，查看mid是否符合答案要求（check）；

③如果check到符合要求，则区间向左缩小（r=mid），否则区间向右缩小（l=mid）；

PS：注意check对于mid的结果是连续的，否则不能使用二分。



例题：[luogu P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)

代码：（希望你们能接受我的码风）

```cpp
#include<bits/stdc++.h>
using namespace std;

int n,m,a[100005],l,r,mid,sum,cnt;

bool check(int x){
	if(a[1]>x) return false;
	sum=a[1];cnt=1;
	for(int i=2;i<=n;i++){
		if(sum+a[i]<=x) sum+=a[i];
		else{
			if(a[i]>x) return false;
			sum=a[i]; 
			cnt++;
		}
		if(cnt>m) return false;
	}
	return true;
}

int main(){
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;i++) scanf("%d",&a[i]);
	l=0,r=1e9+7;
	while(r-l>1){
		mid=(l+r)/2;
		if(check(mid)) r=mid;
		else l=mid;
	}
	if(check(r)) printf("%d",r);
	else printf("%d",r);
	return 0;
} 
```



####C++ STL标准库自带二分方法：

##### ①lower_bound(begin,end,val)

作用:从地址begin到地址end找到第一个不小于val的元素，并返回其地址。

例如：寻找有序数组a中第一个不小于3的元素及其编号

```c++
int a[5]={1,2,3,4,5};
int b=lower_bound(a,a+5,3)-a; 
cout<<b<<" "<<a[b]<<endl;
```

##### ②upper_bound(begin,end,val)

作用：找到第一个大于val的元素，并返回其地址，用法类似。

##### ③equal_range()

##### ④binary_search()







